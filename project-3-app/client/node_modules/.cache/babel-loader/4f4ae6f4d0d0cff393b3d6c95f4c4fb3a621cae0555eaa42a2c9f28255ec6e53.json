{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Daniel/bootcamp/project-3/project-3-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Daniel/bootcamp/project-3/project-3-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Daniel/bootcamp/project-3/project-3-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'../styles/donateComponent.css';import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import InputGroup from\"react-bootstrap/InputGroup\";import{loadStripe}from\"@stripe/stripe-js\";import{useMutation}from\"@apollo/client\";import{DONATE}from\"../utils/mutations\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var stripePromise=await loadStripe(process.env.REACT_APP_CLIENT_STRIPE_KEY);function DonateComponent(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showForm=_useState2[0],setShowForm=_useState2[1];var handleTabClick=function handleTabClick(){setShowForm(!showForm);var targetElement=document.getElementById(\"scrollTarget\");if(targetElement){targetElement.scrollIntoView({behavior:\"smooth\"});}};var _useMutation=useMutation(DONATE),_useMutation2=_slicedToArray(_useMutation,1),donate=_useMutation2[0];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),donationAmount=_useState4[0],setDonationAmount=_useState4[1];var handleDonate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$donate,data,stripe,session,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return donate({variables:{amount:donationAmount}});case 3:_yield$donate=_context.sent;data=_yield$donate.data;_context.next=7;return stripePromise;case 7:stripe=_context.sent;session=data.donate.session;_context.next=11;return stripe.redirectToCheckout({sessionId:session});case 11:result=_context.sent;if(result.error){console.error(result.error.message);}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function handleDonate(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab \".concat(showForm?'open':''),onClick:handleTabClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"donation-form \".concat(showForm?'open':''),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Donate\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"$\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:donationAmount,onChange:function onChange(e){return setDonationAmount(parseFloat(e.target.value));},min:\"1\",step:\"1\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDonate,variant:\"light\",children:\"Submit\"})]})]})]});}export default DonateComponent;","map":{"version":3,"names":["React","useState","Button","Form","InputGroup","loadStripe","useMutation","DONATE","jsx","_jsx","jsxs","_jsxs","stripePromise","process","env","REACT_APP_CLIENT_STRIPE_KEY","DonateComponent","_useState","_useState2","_slicedToArray","showForm","setShowForm","handleTabClick","targetElement","document","getElementById","scrollIntoView","behavior","_useMutation","_useMutation2","donate","_useState3","_useState4","donationAmount","setDonationAmount","handleDonate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$donate","data","stripe","session","result","wrap","_callee$","_context","prev","next","variables","amount","sent","redirectToCheckout","sessionId","error","console","message","t0","stop","apply","arguments","className","children","concat","onClick","Text","Control","type","value","onChange","e","parseFloat","target","min","step","variant"],"sources":["C:/Users/Daniel/bootcamp/project-3/project-3-app/client/src/components/Donate.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/donateComponent.css';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { DONATE } from \"../utils/mutations\";\r\n\r\nconst stripePromise = await loadStripe(process.env.REACT_APP_CLIENT_STRIPE_KEY);\r\n\r\nfunction DonateComponent() {\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const handleTabClick = () => {\r\n    setShowForm(!showForm);\r\n    const targetElement = document.getElementById(\"scrollTarget\");\r\n    if (targetElement) {\r\n      targetElement.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  };\r\n\r\n  const [donate] = useMutation(DONATE);\r\n  const [donationAmount, setDonationAmount] = useState(0);\r\n\r\n  const handleDonate = async () => {\r\n    try {\r\n      const { data } = await donate({ variables: { amount: donationAmount } });\r\n      const stripe = await stripePromise;\r\n      const { session } = data.donate;\r\n      const result = await stripe.redirectToCheckout({ sessionId: session });\r\n      if (result.error) {\r\n        console.error(result.error.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      {/* Tab at the top right */}\r\n      <div className={`tab ${showForm ? 'open' : ''}`} onClick={handleTabClick}>\r\n      </div>\r\n\r\n      {/* Donation form */}\r\n      <div className={`donation-form ${showForm ? 'open' : ''}`}>\r\n        <h2>Donate</h2>\r\n        <InputGroup>\r\n          <InputGroup.Text>$</InputGroup.Text>\r\n          <Form.Control\r\n            type=\"number\"\r\n            value={donationAmount}\r\n            onChange={(e) => setDonationAmount(parseFloat(e.target.value))}\r\n            min=\"1\"\r\n            step=\"1\"\r\n          />\r\n          <Button onClick={handleDonate} variant=\"light\">\r\n            Submit\r\n          </Button>\r\n        </InputGroup>\r\n        {/* <button className=\"close-button\" onClick={handleTabClick}>\r\n          Close\r\n        </button> */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DonateComponent;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}